<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CinePrime — Premium Movie Library</title>
  <meta name="description" content="CinePrime — a premium, high-polish movie library with filters, search, sorting, and favorites." />
  <!-- Tailwind v3 CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html { scroll-behavior: smooth; }
    /* Glassmorphism helpers */
    .glass {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255,255,255,0.15);
    }
    /* Animated gradient background */
    .bg-hero {
      background: radial-gradient(1200px 600px at 10% 10%, rgba(56,189,248,0.30), transparent 60%),
                  radial-gradient(1000px 600px at 90% 20%, rgba(99,102,241,0.25), transparent 60%),
                  radial-gradient(800px 500px at 40% 80%, rgba(16,185,129,0.25), transparent 60%),
                  linear-gradient(180deg, #0b1020 0%, #0b1020 40%, #0e1224 100%);
    }
    .shimmer {
      position: relative; overflow: hidden; background: rgba(255,255,255,0.08);
    }
    .shimmer::after {
      content: ""; position: absolute; inset: 0;
      transform: translateX(-100%);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.20), transparent);
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer { 100% { transform: translateX(100%); } }

    .btn {
      @apply inline-flex items-center justify-center px-4 py-2 rounded-lg font-semibold transition transform active:scale-95;
    }
    .btn-primary {
      @apply bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-600/20;
    }
    .btn-ghost {
      @apply bg-white/10 hover:bg-white/20 text-white border border-white/20;
    }
    .chip {
      @apply px-3 py-1 rounded-full text-sm cursor-pointer transition border;
    }
    .chip-on { @apply bg-indigo-600 text-white border-indigo-500; }
    .chip-off { @apply bg-white/10 text-white border-white/20 hover:bg-white/20; }
    .card {
      @apply relative overflow-hidden rounded-2xl bg-white/5 border border-white/10 shadow-xl hover:shadow-2xl transition;
    }
    .poster {
      @apply w-full h-64 object-cover transition duration-500;
    }
    .badge {
      @apply absolute top-3 left-3 glass text-white text-xs px-2 py-1 rounded-md;
    }
    .fav {
      @apply absolute top-3 right-3 rounded-full p-2 glass hover:bg-white/20 transition;
    }
    .tooltip::after {
      content: attr(data-tip);
      @apply absolute text-xs px-2 py-1 rounded bg-black/70 text-white opacity-0 pointer-events-none transition;
      transform: translateY(-6px);
      top: -28px; right: 0;
    }
    .tooltip:hover::after { @apply opacity-100; }
  </style>
</head>
<body class="min-h-screen text-white bg-hero">

  <!-- NAV -->
  <header class="sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-gradient-to-br from-indigo-500 via-sky-400 to-emerald-400 shadow-lg"></div>
        <h1 class="text-xl sm:text-2xl font-extrabold tracking-tight">Cine<span class="text-indigo-400">Prime</span></h1>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#library" class="hover:text-indigo-300">Library</a>
        <a href="#filters" class="hover:text-indigo-300">Filters</a>
        <a href="#about" class="hover:text-indigo-300">About</a>
      </nav>
      <div class="flex items-center gap-2">
        <button id="toggleTheme" class="btn btn-ghost" title="Toggle Lights">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364-.707.707M6.343 17.657l-.707.707m12.728 0-.707-.707M6.343 6.343l-.707-.707"/><circle cx="12" cy="12" r="4"/></svg>
        </button>
        <button id="exportJson" class="btn btn-primary">Export JSON</button>
      </div>
    </div>
  </header>

  <!-- HERO -->
<section class="relative overflow-hidden">
  <div class="max-w-7xl mx-auto px-4 pt-10 pb-12 md:pt-16">
    <div class="grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h2 class="text-4xl md:text-5xl font-extrabold leading-tight">
          Streamlined <span class="text-indigo-400">Discovery</span>, Cinematic <span class="text-sky-400">Design</span>.
        </h2>
        <p class="mt-4 text-white/80 max-w-xl">Filter by rating, year, and genre. Search instantly. Pin favorites. All in a silky-smooth, high-budget interface.</p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#filters" class="btn btn-primary">Start Filtering</a>
          <a href="#library" class="btn btn-ghost">Browse Library</a>
        </div>
      </div>
      <div class="relative">
        <div class="absolute -inset-6 bg-gradient-to-tr from-indigo-500/20 via-sky-400/10 to-emerald-400/10 rounded-3xl blur-2xl"></div>
        <div class="glass rounded-3xl p-4 border-white/10">
          <img class="rounded-2xl object-cover w-full h-64 sm:h-80"
               src="https://images.unsplash.com/photo-1524985069026-dd778a71c7b4?auto=format&fit=crop&w=1600&q=80"
               alt="Cinema hall interior" />
        </div>
      </div>
    </div>
  </div>
</section>


  <!-- FILTERS -->
  <section id="filters" class="border-t border-white/10 py-8">
    <div class="max-w-7xl mx-auto px-4">
      <div class="glass rounded-2xl p-5">
        <div class="flex flex-col lg:flex-row gap-6">
          <!-- Search & Sort -->
          <div class="flex-1">
            <label class="block text-sm mb-2">Search Title</label>
            <div class="relative">
              <input id="search" type="text" placeholder="e.g., Inception" class="w-full bg-white/5 border border-white/15 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute right-3 top-1/2 -translate-y-1/2 text-white/60" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            </div>
            <div class="mt-4 grid sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm mb-2">Sort By</label>
                <select id="sortBy" class="w-full bg-white/5 border border-white/15 rounded-xl px-4 py-3">
                  <option value="title-asc">Title (A→Z)</option>
                  <option value="title-desc">Title (Z→A)</option>
                  <option value="rating-desc">Rating (High→Low)</option>
                  <option value="rating-asc">Rating (Low→High)</option>
                  <option value="year-desc">Year (New→Old)</option>
                  <option value="year-asc">Year (Old→New)</option>
                </select>
              </div>
              <div>
                <label class="block text-sm mb-2">Minimum Rating: <span id="ratingVal" class="font-semibold">0</span></label>
                <input id="minRating" type="range" min="0" max="10" step="0.5" value="0" class="w-full">
              </div>
            </div>
          </div>

          <!-- Year -->
          <div class="w-full lg:w-72">
            <label class="block text-sm mb-2">From Year: <span id="yearFromVal" class="font-semibold">1990</span></label>
            <input id="yearFrom" type="range" min="1980" max="2025" step="1" value="1990" class="w-full">
            <label class="block text-sm mb-2 mt-4">To Year: <span id="yearToVal" class="font-semibold">2025</span></label>
            <input id="yearTo" type="range" min="1980" max="2025" step="1" value="2025" class="w-full">
          </div>

          <!-- Genres -->
          <div class="flex-1">
            <label class="block text-sm mb-2">Genres</label>
            <div id="genreChips" class="flex flex-wrap gap-2"></div>
            <div class="mt-4 flex gap-2">
              <button id="clearFilters" class="btn btn-ghost">Clear Filters</button>
              <button id="showFavs" class="btn btn-ghost">Show Favorites</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LIBRARY -->
  <section id="library" class="py-10">
    <div class="max-w-7xl mx-auto px-4">
      <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <!-- Skeletons -->
        <template id="skeleton">
          <div class="card shimmer h-96 rounded-2xl"></div>
        </template>
      </div>
      <p id="empty" class="hidden text-center text-white/70 mt-10">No movies match your filters.</p>
    </div>
  </section>

  <!-- MODAL -->
  <div id="modal" class="fixed inset-0 z-[60] hidden items-center justify-center">
    <div class="absolute inset-0 bg-black/70"></div>
    <div class="relative glass rounded-2xl border border-white/10 max-w-3xl w-[92%] p-0 overflow-hidden">
      <div class="relative">
        <img id="mPoster" class="w-full h-64 object-cover" src="" alt="">
        <div class="badge">Rating: <span id="mRating">—</span> • <span id="mYear">—</span></div>
        <button id="closeModal" class="fav tooltip" data-tip="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
        </button>
      </div>
      <div class="p-5 space-y-3">
        <h3 id="mTitle" class="text-2xl font-bold"></h3>
        <div class="text-sm text-white/70">Genres: <span id="mGenres"></span></div>
        <p id="mPlot" class="text-white/90"></p>
        <div class="flex gap-2 pt-2">
          <a id="mTrailer" href="#" target="_blank" class="btn btn-primary">Watch Trailer</a>
          <button id="mFav" class="btn btn-ghost">Add to Favorites</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ABOUT -->
  <section id="about" class="border-t border-white/10 py-12">
    <div class="max-w-7xl mx-auto px-4">
      <div class="glass rounded-2xl p-6">
        <h3 class="text-2xl font-bold mb-2">About CinePrime</h3>
        <p class="text-white/80">This is a student-built, console-traceable project showcasing functions & objects, filter logic, and DOM manipulation — wrapped in a premium UI. No external APIs needed; data is local and fast.</p>
      </div>
    </div>
  </section>

  <footer class="py-8">
    <div class="max-w-7xl mx-auto px-4 text-center text-white/60">
      © 2025 CinePrime • Built for Assignment 1 — Movie Library
    </div>
  </footer>

  <script>
    // --------- DATA (Objects / Arrays) ----------
    /** @type {Array<{id:number,title:string,year:number,rating:number,genres:string[],poster:string,plot:string,trailer:string}>} */
    const MOVIES = [
      {
        id: 1,
        title: "Eclipse Protocol",
        year: 2024,
        rating: 8.7,
        genres: ["Sci-Fi", "Thriller"],
        poster: "https://images.unsplash.com/photo-1517602302552-471fe67acf66?auto=format&fit=crop&w=1200&q=80",
        plot: "A rogue physicist races to stop a time experiment from collapsing parallel cities.",
        trailer: "https://www.youtube.com/results?search_query=Eclipse+Protocol+trailer"
      },
      {
        id: 2,
        title: "Golden Harbor",
        year: 2019,
        rating: 7.8,
        genres: ["Adventure", "Drama"],
        poster: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1200&q=80",
        plot: "An estranged father and daughter embark on a stormy voyage to save their family shipyard.",
        trailer: "https://www.youtube.com/results?search_query=Golden+Harbor+trailer"
      },
      {
        id: 3,
        title: "Neon Boulevard",
        year: 2021,
        rating: 8.3,
        genres: ["Crime", "Action"],
        poster: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?auto=format&fit=crop&w=1200&q=80",
        plot: "A getaway driver finds a second chance in a city that never sleeps.",
        trailer: "https://www.youtube.com/results?search_query=Neon+Boulevard+trailer"
      },
      {
        id: 4,
        title: "Silent Peaks",
        year: 2018,
        rating: 7.2,
        genres: ["Mystery", "Drama"],
        poster: "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1200&q=80",
        plot: "A journalist uncovers disappearing hikers in a town shadowed by myths.",
        trailer: "https://www.youtube.com/results?search_query=Silent+Peaks+trailer"
      },
      {
        id: 5,
        title: "Orbit 9",
        year: 2023,
        rating: 8.9,
        genres: ["Sci-Fi", "Adventure"],
        poster: "https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?auto=format&fit=crop&w=1200&q=80",
        plot: "A crew on a deep-space relay outpost faces a signal that shouldn’t exist.",
        trailer: "https://www.youtube.com/results?search_query=Orbit+9+trailer"
      },
      {
        id: 6,
        title: "Velvet Season",
        year: 2020,
        rating: 7.5,
        genres: ["Romance", "Drama"],
        poster: "https://images.unsplash.com/photo-1524255684952-d7185b509571?auto=format&fit=crop&w=1200&q=80",
        plot: "Two artists testing fate during a month of fleeting warmth.",
        trailer: "https://www.youtube.com/results?search_query=Velvet+Season+trailer"
      },
      {
        id: 7,
        title: "Quantum Alley",
        year: 2022,
        rating: 8.1,
        genres: ["Sci-Fi", "Mystery"],
        poster: "https://images.unsplash.com/photo-1526336024174-e58f5cdd8e13?auto=format&fit=crop&w=1200&q=80",
        plot: "When time begins skipping, a detective re-solves a case across three timelines.",
        trailer: "https://www.youtube.com/results?search_query=Quantum+Alley+trailer"
      },
      {
        id: 8,
        title: "Last Stand at Meridian",
        year: 2017,
        rating: 7.1,
        genres: ["Action", "War"],
        poster: "https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&w=1200&q=80",
        plot: "A small unit holds a mountain pass that could change the course of battle.",
        trailer: "https://www.youtube.com/results?search_query=Last+Stand+at+Meridian+trailer"
      },
      {
        id: 9,
        title: "Midnight Atlas",
        year: 2016,
        rating: 7.0,
        genres: ["Adventure", "Fantasy"],
        poster: "https://images.unsplash.com/photo-1516534775068-ba3e7458af70?auto=format&fit=crop&w=1200&q=80",
        plot: "A cartographer draws maps of dreams to find a missing friend.",
        trailer: "https://www.youtube.com/results?search_query=Midnight+Atlas+trailer"
      },
      {
        id: 10,
        title: "City of Embers",
        year: 2015,
        rating: 6.9,
        genres: ["Drama"],
        poster: "https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=1200&q=80",
        plot: "Five intertwined lives ignite in a blackout that spans a metropolis.",
        trailer: "https://www.youtube.com/results?search_query=City+of+Embers+trailer"
      },
      {
        id: 11,
        title: "Riftwalkers",
        year: 2025,
        rating: 9.2,
        genres: ["Sci-Fi", "Action"],
        poster: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=1200&q=80",
        plot: "Mercenaries who leap between dimensions to prevent a singularity event.",
        trailer: "https://www.youtube.com/results?search_query=Riftwalkers+trailer"
      },
      {
  id: 12,
  title: "Harbor Lights",
  year: 2013,
  rating: 6.5,
  genres: ["Romance"],
  poster: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80", 
  plot: "A chef returns to her coastal hometown to rebuild more than a restaurant.",
  trailer: "https://www.youtube.com/results?search_query=Harbor+Lights+trailer"
}

    ];

    // --------- STATE ----------
    const state = {
      search: "",
      genres: new Set(),
      minRating: 0,
      yearFrom: 1990,
      yearTo: 2025,
      sortBy: "title-asc",
      showFavorites: false,
      favorites: new Set(JSON.parse(localStorage.getItem("cine_favs") || "[]")),
    };

    const GENRES = Array.from(new Set(MOVIES.flatMap(m => m.genres))).sort();

    // --------- DOM ----------
    const grid = document.getElementById("grid");
    const empty = document.getElementById("empty");
    const genreChips = document.getElementById("genreChips");
    const searchInp = document.getElementById("search");
    const sortSel = document.getElementById("sortBy");
    const minRating = document.getElementById("minRating");
    const ratingVal = document.getElementById("ratingVal");
    const yearFrom = document.getElementById("yearFrom");
    const yearTo = document.getElementById("yearTo");
    const yearFromVal = document.getElementById("yearFromVal");
    const yearToVal = document.getElementById("yearToVal");
    const clearBtn = document.getElementById("clearFilters");
    const showFavsBtn = document.getElementById("showFavs");
    const exportBtn = document.getElementById("exportJson");

    // Modal
    const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const mPoster = document.getElementById("mPoster");
    const mTitle = document.getElementById("mTitle");
    const mGenres = document.getElementById("mGenres");
    const mYear = document.getElementById("mYear");
    const mRating = document.getElementById("mRating");
    const mPlot = document.getElementById("mPlot");
    const mTrailer = document.getElementById("mTrailer");
    const mFav = document.getElementById("mFav");

    // Theme toggle (just dims background)
    document.getElementById("toggleTheme").addEventListener("click", () => {
      document.body.classList.toggle("bg-hero");
      document.body.classList.toggle("bg-black");
    });

    // --------- RENDER HELPERS ----------
    function saveFavs() {
      localStorage.setItem("cine_favs", JSON.stringify(Array.from(state.favorites)));
    }

    function badge(text) {
      return `<span class="badge">${text}</span>`;
    }

    function favBtn(id) {
      const isFav = state.favorites.has(id);
      return `
        <button class="fav tooltip" data-id="${id}" data-tip="${isFav ? "Unfavorite" : "Add to favorites"}" aria-label="favorite">
          ${isFav
            ? '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21s-6.715-4.64-9.427-7.353A5.333 5.333 0 0 1 12 6.12a5.333 5.333 0 0 1 9.427 7.527C18.715 16.36 12 21 12 21Z"/></svg>'
            : '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/></svg>'}
        </button>
      `;
    }

    function card(movie) {
      return `
        <article class="card group" data-id="${movie.id}">
          <img class="poster group-hover:scale-110" src="${movie.poster}" alt="${movie.title}">
          ${badge(movie.rating.toFixed(1) + " • " + movie.year)}
          ${favBtn(movie.id)}
          <div class="p-4">
            <h3 class="text-lg font-bold">${movie.title}</h3>
            <p class="text-white/70 text-sm mt-1">${movie.genres.join(" • ")}</p>
            <button class="btn btn-ghost mt-4 w-full open-modal">View Details</button>
          </div>
        </article>
      `;
    }

    function skeletons(n=8) {
      grid.innerHTML = Array.from({length:n}).map(() => `<div class="card shimmer h-96"></div>`).join("");
    }

    // --------- FILTERING / SORTING ----------
    function applyFilters(list) {
      return list
        .filter(m => !state.showFavorites || state.favorites.has(m.id))
        .filter(m => m.title.toLowerCase().includes(state.search))
        .filter(m => m.rating >= state.minRating)
        .filter(m => m.year >= state.yearFrom && m.year <= state.yearTo)
        .filter(m => state.genres.size === 0 || m.genres.some(g => state.genres.has(g)));
    }

    function applySort(list) {
      const [key, dir] = state.sortBy.split("-");
      const s = [...list].sort((a,b) => {
        let vA, vB;
        if (key === "title") { vA = a.title.toLowerCase(); vB = b.title.toLowerCase(); }
        if (key === "rating") { vA = a.rating; vB = b.rating; }
        if (key === "year") { vA = a.year; vB = b.year; }
        return vA > vB ? 1 : vA < vB ? -1 : 0;
      });
      return dir === "desc" ? s.reverse() : s;
    }

    function render() {
      const filtered = applyFilters(MOVIES);
      const sorted = applySort(filtered);

      if (sorted.length === 0) {
        grid.innerHTML = "";
        empty.classList.remove("hidden");
        return;
      }
      empty.classList.add("hidden");
      grid.innerHTML = sorted.map(card).join("");

      // bind favorite toggles + modal openers
      grid.querySelectorAll(".fav").forEach(btn => {
        btn.addEventListener("click", (e) => {
          const id = +btn.dataset.id;
          if (state.favorites.has(id)) state.favorites.delete(id); else state.favorites.add(id);
          saveFavs(); render();
          e.stopPropagation();
        });
      });
      grid.querySelectorAll(".open-modal").forEach(btn => {
        btn.addEventListener("click", (e) => {
          const id = +btn.closest("[data-id]").dataset.id;
          openModal(MOVIES.find(m => m.id === id));
          e.stopPropagation();
        });
      });
    }

    // --------- MODAL ----------
    let currentModalMovie = null;
    function openModal(movie) {
      currentModalMovie = movie;
      mPoster.src = movie.poster;
      mTitle.textContent = movie.title;
      mGenres.textContent = movie.genres.join(", ");
      mYear.textContent = movie.year;
      mRating.textContent = movie.rating.toFixed(1);
      mPlot.textContent = movie.plot;
      mTrailer.href = movie.trailer;
      mFav.textContent = state.favorites.has(movie.id) ? "Remove Favorite" : "Add to Favorites";
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }
    function closeModalFn() {
      modal.classList.add("hidden");
      modal.classList.remove("flex");
    }
    closeModal.addEventListener("click", closeModalFn);
    modal.addEventListener("click", (e) => { if (e.target === modal.firstElementChild) closeModalFn(); });
    mFav.addEventListener("click", () => {
      const id = currentModalMovie.id;
      if (state.favorites.has(id)) state.favorites.delete(id); else state.favorites.add(id);
      saveFavs(); mFav.textContent = state.favorites.has(id) ? "Remove Favorite" : "Add to Favorites";
      render();
    });

    // --------- GENRE CHIPS ----------
    function renderGenres() {
      genreChips.innerHTML = GENRES.map(g => `
        <button class="chip ${state.genres.has(g) ? "chip-on" : "chip-off"}" data-genre="${g}">${g}</button>
      `).join("");
      genreChips.querySelectorAll(".chip").forEach(ch => {
        ch.addEventListener("click", () => {
          const g = ch.dataset.genre;
          state.genres.has(g) ? state.genres.delete(g) : state.genres.add(g);
          renderGenres(); render();
        });
      });
    }

    // --------- EXPORT ----------
    exportBtn.addEventListener("click", () => {
      const data = applySort(applyFilters(MOVIES));
      const blob = new Blob([JSON.stringify(data, null, 2)], {type: "application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = "cineprime-selection.json"; a.click();
      URL.revokeObjectURL(url);
    });

    // --------- EVENTS ----------
    searchInp.addEventListener("input", e => { state.search = e.target.value.trim().toLowerCase(); render(); });
    sortSel.addEventListener("change", e => { state.sortBy = e.target.value; render(); });
    minRating.addEventListener("input", e => { state.minRating = +e.target.value; ratingVal.textContent = state.minRating; render(); });
    yearFrom.addEventListener("input", e => { state.yearFrom = +e.target.value; yearFromVal.textContent = state.yearFrom; if (state.yearFrom > state.yearTo) { state.yearTo = state.yearFrom; yearTo.value = state.yearTo; yearToVal.textContent = state.yearTo; } render(); });
    yearTo.addEventListener("input", e => { state.yearTo = +e.target.value; yearToVal.textContent = state.yearTo; if (state.yearTo < state.yearFrom) { state.yearFrom = state.yearTo; yearFrom.value = state.yearFrom; yearFromVal.textContent = state.yearFrom; } render(); });
    clearBtn.addEventListener("click", () => {
      state.search = "";
      state.genres.clear();
      state.minRating = 0; minRating.value = 0; ratingVal.textContent = "0";
      state.yearFrom = 1990; state.yearTo = 2025; yearFrom.value = 1990; yearTo.value = 2025; yearFromVal.textContent = "1990"; yearToVal.textContent = "2025";
      state.sortBy = "title-asc"; sortSel.value = "title-asc";
      state.showFavorites = false; showFavsBtn.classList.remove("bg-indigo-600");
      searchInp.value = "";
      renderGenres(); render();
    });
    showFavsBtn.addEventListener("click", () => {
      state.showFavorites = !state.showFavorites;
      showFavsBtn.classList.toggle("bg-indigo-600", state.showFavorites);
      render();
    });

    // --------- INIT ----------
    function init() {
      // skeletons then render
      skeletons(8);
      setTimeout(() => {
        ratingVal.textContent = state.minRating;
        yearFromVal.textContent = state.yearFrom;
        yearToVal.textContent = state.yearTo;
        renderGenres();
        render();
        console.info("CinePrime ready. Movies loaded:", MOVIES.length);
      }, 400);
    }
    init();
  </script>
</body>
</html>
